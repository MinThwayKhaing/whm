<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	template="/common/commonLayout.xhtml">

	<ui:param name="rendered" value="true" />
	<ui:define name="content">
		<h:body style="width: auto;">

			<h:form id="dRRegStatusAdminManager" styleClass="form-horizontal"
				style="margin-bottom: 1px;">

				<h:outputText
					value="Daily Report Registration Status (Admin and Manager)"
					style="margin-top: 0px; margin-bottom: 10px;font-size:20px;" />
				<p:separator style="height:5px;margin-top: 2px;margin-bottom: 2px;" />

				<table width="100%">
					<tr>
						<td></td>
						<td width="70%" align="center">
							<div
								style="z-index: 100; position: fixed; margin-top: -30px; width: 700px;">
								<p:messages showDetail="true" id="messages" closable="true" />
							</div>
						</td>
					</tr>
				</table>

				<table class="whmBackStyle">
					<tr>
						<td width="120px;"><span class="cmms-label">Year<span
								style="color: red;">*</span></span></td>
						<td>:</td>
						<td><!-- <p:selectOneMenu id="year"
								value="#{DailyReportRegistrationStatusAdminBean.year}"
								style="width:120px;">
								<f:selectItem itemLabel="-" itemValue="#{null}" /> -->
								<p:selectOneMenu id="year"
							value="#{DailyReportRegistrationStatusAdminBean.year}"
							style="width:120px;" >
								<f:selectItems
									value="#{DailyReportRegistrationStatusAdminBean.years}" />
							</p:selectOneMenu></td>
						<td></td>
						<td width="120px;"><span class="cmms-label">Month<span
								style="color: red;">*</span></span></td>
						<td>:</td>
						<td><!-- <p:selectOneMenu id="month"
								value="#{DailyReportRegistrationStatusAdminBean.month}"
								style="width:150px">
								<f:selectItem itemLabel="-" itemValue="#{null}" /> -->
								<!-- <f:selectItems 
									value="#{DailyReportRegistrationStatusAdminBean.months}" /> -->
								<p:selectOneMenu id="month" 
							value="#{DailyReportRegistrationStatusAdminBean.month}" 
							style="width:120px;" >
								<f:selectItems value="#{DailyReportRegistrationStatusAdminBean.months.entrySet()}" var="entry"
									itemValue="#{entry.key}" itemLabel="#{entry.value}" />
							</p:selectOneMenu></td>
							<td></td>
						<td><p:selectBooleanCheckbox value="#{DailyReportRegistrationStatusAdminBean.showSelect}" /></td>
						<td><p:outputLabel  value=" Show only who is not completed."  /></td>
					</tr>
					<tr>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td><td></td>
					</tr>
					<tr>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td><td></td>
					</tr>
					<tr>
						<td align="left"><p:commandButton
								value="#{label['COMMON_SHOW_BTN']}" id="show" process="@form"
								ajax="true"
								actionListener="#{DailyReportRegistrationStatusAdminBean.show}"
								style="font-size:13px;"
								update=":dRRegStatusAdminManager :dRRegStatusAdminManagerResult"></p:commandButton></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
					</tr>
				</table>
				<br />

				<p:separator style="height:5px;margin-top: 2px;margin-bottom: 2px;" />
			</h:form>
			
			<div>
	


				<h:form id="dRRegStatusAdminManagerResult">
					<div align="right">
						<h:graphicImage value="/images/reg_status.png" rendered="#{DailyReportRegistrationStatusAdminBean.resultList.size() gt 0}" />
					</div>
					<br />
					<div>
					<h:outputText value="Total search result count :#{DailyReportRegistrationStatusAdminBean.resultList.size()}"  
					style="font-weight:bold" rendered="#{DailyReportRegistrationStatusAdminBean.resultList.size() gt 0}"/>
					</div> 
					<div style="width: 100%; width: 100%;overflow-x: auto; overflow-y: auto;">  
					<p:panelGrid id="resultTable"
						rendered="#{not empty DailyReportRegistrationStatusAdminBean.resultList}">
						<f:facet name="header">
							<p:row>
								<p:column rowspan="2">Staff ID</p:column>
								<p:column rowspan="2">Staff Name<p:spacer width="100" height="1" /></p:column>
								<p:column rowspan="2">Team<p:spacer width="100" height="1" /></p:column>

								<c:forEach
									items="#{DailyReportRegistrationStatusAdminBean.headerList}"
									var="entry">
									<p:column>#{entry.dayNames}</p:column>
								</c:forEach>
							</p:row>

							<p:row>
								<c:forEach
									items="#{DailyReportRegistrationStatusAdminBean.headerList}"
									var="entry">

									<p:column rendered="#{entry.holidays_flag == false}">#{entry.weekDays}</p:column>
									<p:column rendered="#{entry.holidays_flag == true}"
										styleClass="foo">#{entry.weekDays}</p:column>

								</c:forEach>
							</p:row>

						</f:facet>
						
						<c:forEach var="data"
							items="#{DailyReportRegistrationStatusAdminBean.resultList}">
							<p:row>
								<p:column>
									<h:outputText value="#{data.username}" />
								</p:column>
								<p:column>
									<h:outputText value="#{data.fullname}" />
								</p:column>
								<p:column>
									<h:outputText value="#{data.team}" />
								</p:column>

								<c:forEach items="#{data.dateList}" var="value">
									<p:column>
										<h:outputText value="#{value}" />
									</p:column>
								</c:forEach>
							</p:row>
						</c:forEach>
				

					</p:panelGrid>
					</div>
					<!-- <div align="center">
					<h:outputText value="There is no record!"  rendered="#{empty DailyReportRegistrationStatusAdminBean.resultList}"/>
					</div> -->
				</h:form>
			</div>
			<script type="text/javascript">
				history.pushState(null, null, document.URL);
				window.addEventListener('popstate', function() {
					history.pushState(null, null, document.URL);
				});
				function disableF5(e) {
					if ((e.which || e.keyCode) == 116
							|| (e.which || e.keyCode) == 82) {
						e.preventDefault();
						e.stopPropagation();
					}
				};
				$(document).bind("load", disableF5);
			</script>

			<style>
td.foo {
	background-color: red;
}

.ui-widget-header {
	border: 1px solid #327e04;
	background: #63b175;
	color: #FFFF;
}
</style>
		</h:body>
	</ui:define>
</ui:composition>
